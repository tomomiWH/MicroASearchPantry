# Pantry Search Items Microservice

## Overview

The Pantry Search Items Microservice provides search functionality that allows users to request and receive filtered results from the pantry items. Users specify their search type and search term, which are saved in a user input file called `MicroAUserCommPipe.txt` (generated by the main program). 

The microservice reads the user's preferences from `MicroAUserCommPipe.txt`, performs the requested search operation, and writes the results back to `MicroAUserCommPipe.txt` temporarily, before finalizing the output in `SearchResult.txt`.

---

## Communication Contract

### REQUEST Data from the Microservice

1. **Prepare `MicroAUserCommPipe.txt`:**  
   Create a blank `MicroAUserCommPipe.txt` file in the same directory as your main program.  

2. **Write User Input Data to `MicroAUserCommPipe.txt`:**  
   Add the search type and search term to the file in the following format:<br>
- N indicates Search by Item Name
- I indicates Search by Item ID
- E indicates Search by Expiartion Date
   
    #### Example REQUEST Calls 

    - ##### Search by **Item Name**, search for "Rice," the `MicroAUserCommPipe.txt` file should contain:<br>
      `N,Rice`

    - ##### Search by **Item ID**, search for Item ID "011," the `MicroAUserCommPipe.txt` file should contain:<br>
      `I,001`

    - ##### Search by **Expiration Date**, search for items with an expiration date of "08-27-2025," the `MicroAUserCommPipe.txt` file should contain:<br>
      `E,08-27-2025`
4. **Run the Microservice:**  
   Ensure the `search_pantry_service.py` script is located in the same directory as your main program.  

5. **Start the Microservice:**  
   Open a terminal or command prompt, navigate to the directory containing `search_pantry_service.py`, and run the script using the following command:  
   python search_pantry_service.py

### RECEIVE Data from the Microservice

1. **Prepare `SearchResult.txt`:**  
Create a blank `SearchResult.txt` file in the same directory as your main program.  

2. **Read the Results:**  
Once the microservice processes the request, the response will be written to `SearchResult.txt`.  
#### Example RECEIVE Call
        ```
        time.sleep(10)
        # Read results from MicroAUserCommPipe.txt pipeline
        with open('MicroAUserCommPipe.txt', "r") as command_file:
            results = command_file.readlines()
         
            print("waiting results back...")
            time.sleep(5)

            # Check result if contains header column "Item ID"
            # Write out to SearchResults.txt
            if results and "Item ID" in results[0]:
                with open('SearchResult.txt', "w") as result_file:
                    result_file.writelines(results)
                print("search results wrote to SearchResults.txt: ", results)

        # Display results
        with open('SearchResult.txt', 'r') as file:
            print("--------------- Search Result display -----------------")
            results = file.read()
            print("read results from SearchResults.txt : ",results)
            time.sleep(5)
        
        with open(SEARCH_RESULT, "w") as file:
            file.write("")


#### Example Output Call from `SearchResult.txt`

If the search type was "N" andsearch term was "Rice," the resulting file might look like:<br>

```
Item ID,item_name,quantity,expiration_date,details
005,Rice Flour,2,09-30-2026,"2 lb bag, Bob's Redmill"
012,Rice Noodles,2,10-12-2026,16 oz bag

